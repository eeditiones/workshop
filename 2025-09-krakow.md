# 25th Annual Conference of the Text Encoding Initiative
# Jinks workshop plan

## Opening round

- Introduction of participants and tutors
- Previous experience with TEI Publisher, TEI Processing Model, other publication infrastructures

## Jinks: motivations and rationale

- TEI Publisher-generated applications need upgrading as new versions are released
- Users might want to change the configuration at a later date
- Users would benefit from extended configuration options
- Single blueprint for generated app for all is insufficient: many editions share multiple features but there are no distinct paradigms or fixed types of editions anymore
- In the body of TEI Publisher-based editions, implementations of various features exist. Nevertheless it's not necessarily
easy to replicate them into a different project because of all the orchestration layers that need to be taken into account: from data encoding in TEI and organisation across data packages, collections, files etc, to API endpoints, Query modules, Lucene index configurations, HTML templates, web components, to CSS styling
- Solution: full-blown application manager we called Jinks

### Conceptual vs implementation blocks in Jinks

- Base
- Features
- Themes
- Blueprints

vs

- Profiles (with necessary resources prepared for seamless integration into the base)

![](/images/jinks.jpg)

## Jinks installation

Let’s click around and install Jinks into eXist-db

We’re running pre-release versions so not everything is available as a package through eXist’s public repository. Prepared XAR packages are available below:

- [jinks](https://github.com/eeditiones/jinks/releases/download/v1.0.0-beta/jinks-1.0.0-beta.xar) 

### Logging in

user: tei 
password: simple

This is also the default user for generated applications

## Part 1:  Show and tell

Tutors will walk participants through steps of gradually assembling an edition adding and configuring features to the base.

- Generate empty base app and view the deployed package - no data to browse through yet.
- Select the **upload** feature and regenerate the application
- Use the upload widget to add [one](data/laks-correspondence-334.xml)  or [two](data/laks-correspondence-335.xml) of Szymon Laks letters
- Discuss the document (letter) view
- Select the **landing page** feature and regenerate the application

### Download/synchronize

Show synchronisation to filesystem and source control repository on GitHub

```xquery
file:sync('/db/apps/naborowski', '/Users/magdalenaturska/Sources/Publisher/Naborowski/naborowski-app', ())
```

## Part 2: Hands-on

- Ask users to click the same themselves: upload, landing page, upload the document
- Check if it works
- Switch the colour palette (add *theme* section to the `config.json`)

```json
  "theme": {
    "colors": {
      "palette": "green"
    }
  },
```

- Remove query/login/language from the menu bar (*menu* section in the `config.json`)

```json
"menu": {
    "language": false,
    "search": false,
    "login": false
  },
```

## Explanation of Jinks configuration

- config.json structure overview
- feature configuration and documentation

## Part 3: It all starts with the data

### Dataset 1

- Install the [Laks data package](data/xars/laks-data-1.0.xar) into eXist (via package manager)
- Using the same Jinks config as before, change the data and data default to use the external data package

```json
  "defaults": {
    "data": "/db/apps/laks-data/data",
    "data-default": "letters"    
  },
```
- See how documents are accessed by their file name, e.g. `letters/laks-correspondence-335.xml`

- Change the addressing method to use `xml:id` attributes

```json
  "defaults": {
    "data": "/db/apps/laks-data/data",
    "data-default": "letters",
    "address-by-id": true   
  },
```

It still shows some parameters after the id: `SL-335?view=div&odd=teipublisher`. We can control that with `urls` section

```json
  "urls": {
    "ignore": "view, odd"
  },
```

- Analyze the the TEI encoding for letter nr. 8, particularly regarding facsimile connection
- Select the **IIIF feature** and regenerate the application

By itself it doesn't change anything, we need to configure the feature

```json
"features": {
    "iiif": {
      "viewer": "pb-tify",
      "enabled": true
    }
  },
```

- Check the results on the document page

### Dataset 2

- Install [Karl Barth data package](data/xars/kb-data.xar) into eXist (via package manager)
- Remove IIIF feature as this dataset has no facsimiles
- Add registers feature and timeline
- Decide if we want registers in the document view or not (configure the template front matter?)
- Add edition introduction XML to articles (we can switch momentarily the data default so it lands in the correct spot)
- Add menu option linking to the introduction

## Part 4: Customise the landing page

- Upload new hero image and configure the theme to use it
- Switch TEIPublisher logo to editiones
- Change some of the i18n labels for hero image
- Add a team member (upload profile image and text)
- Observe regeneration conflict

## Update options

- Quick
- Full
- Factory reset
- Reindex
- Fix-Odds

## Add new ODD to the app and use it

- Create some special rule missing from TEI Publisher
- Apply fix odds

## Links
* [Workshop server](https://workshop.jinntec.de/exist/)
* [Slides]()
* TEI Publisher
  - [Website](https://teipublisher.org)
* [e-editiones](https://e-editiones.org/)

## Follow-up

Feel free to contact Magda, Helena, Lars or Wolfgang during the conference or later.

Participants are strongly encouraged to join the [e-editiones slack](https://join.slack.com/t/e-editiones/shared_invite/zt-e19jc03q-OFaVni~_lh6emSHen6pswg)
for asking questions and contributing to the discussions after the conference is over.
